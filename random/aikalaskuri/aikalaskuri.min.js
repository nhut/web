function dynamicSort(t){var e=1;return"-"===t[0]&&(e=-1,t=t.substr(1)),function(r,a){var n=r[t]<a[t]?-1:r[t]>a[t]?1:0;return n*e}}function Person(t,e,r,a,n){var i={id:index++,firstname:t,lastname:e,birthday:r,picUrl:a,dName:function(){return this.firstname+" "+this.lastname},dBirthday:function(){var t,e=new Date(this.birthday);try{t=e.toLocaleString().slice(0,-3)}catch(r){}return t},nBirthday:function(){var t=new Date,e=new Date(this.birthday);return e.setFullYear(t.getFullYear()),t.getTime()>e.getTime()&&e.setFullYear(t.getFullYear()+1),e.toLocaleString()},currentAge:function(){var t=new Date(this.birthday);if(this.dieDate){var e=new Date(this.dieDate);return~~((e-t)/315576e5)}return~~((Date.now()-t)/315576e5)},nextBirthday:function(){var t=new Date,e=new Date(this.birthday);e.setFullYear(t.getFullYear()),t.getTime()>e.getTime()&&e.setFullYear(t.getFullYear()+1);var r=e-t;return r},tillNextBirthday:function(){var t=this.nextBirthday(),e=Math.floor(t/time_day),r=Math.floor(t%time_day/time_hour),a=Math.floor(t%time_hour/time_minute),n=Math.floor(t%time_minute/time_seconds);return e+"vrk "+r+"h "+a+"min "+n+"s"},currAge:0,nextBDay:0,dieDate:null,dieDateDisplay:function(){var t,e=new Date(this.dieDate);try{t=e.toLocaleString().slice(0,-3)}catch(r){}return t}};return i.currAge=i.currentAge(),i.nextBDay=i.nextBirthday(),n&&(i.dieDate=n),i}function createPersonBox(t,e){try{var r=null==t.dieDate?!1:!0;console.log("Luodaan henkilö... "+t.dName()+", "+t.currentAge()+", "+t.dBirthday()+" --> "+t.nBirthday()+", isDead="+r);var a=t.currentAge(),n='<fieldset class="box">';n+="<legend "+(showId?"":'title="'+t.id+'")')+(r?'style="color: red;"':"")+">"+t.dName()+" ("+a+")"+(showId?"&nbsp;&nbsp;id="+t.id:"")+"</legend>",n+='<span class="pDiv"><img src="'+(showPic?t.picUrl:"")+'" class="pic" /></span>',n+='<span class="text">',n+='<table class="pTable">',n+="<tr>",n+="<td>"+text.age+":</td>",n+="<td>"+a+"</td>",n+="</tr>",n+="<tr>",n+="<td>"+text.birthday+":</td>",n+="<td>"+t.dBirthday()+"</td>",n+="</tr>",r?(n+="<tr>",n+="<td>"+text.dieDate+":</td>",n+='<td><span id="b_'+t.id+'"></td>',n+="</tr>"):(n+="<tr>",n+="<td>"+text.nextBirthday+":</td>",n+='<td><span id="b_'+t.id+'"></td>',n+="</tr>"),n+="</table>",n+="</span>",n+="</fieldset>",e.innerHTML+=n}catch(i){console.log("Virhe! "+i+", "+t.dName()+", "+t.currentAge()+", "+t.dBirthday()+" --> "+t.nBirthday())}}function createGraphNod(t){try{{g.addNode(t.id,{label:t.dName()+" ("+t.currAge+")"})}}catch(e){}}function updateCountdown(){if(persons)for(var t=0;t<persons.length;t++){var e=persons[t],r=null==e.dieDate?e.tillNextBirthday():e.dieDateDisplay();document.getElementById("b_"+e.id).innerHTML=r}if(cdowns)for(var t=0;t<cdowns.length;t++){var a=cdowns[t];document.getElementById("b_"+a.id).innerHTML=a.tillEndDate()}updCount++,setTimeout(updateCountdown,1e3)}function Countdown(t,e,r){var a={id:"cd_"+countdownIndex++,title:t,eDate:e,eDateDisplay:function(){var t,e=new Date(this.eDate);try{t=e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear()}catch(r){}return t},tillEndDate:function(){var t=new Date,e=new Date(this.eDate);e.setFullYear(t.getFullYear()),t.getTime()>e.getTime()&&e.setFullYear(t.getFullYear()+1);var r=e-t,a=Math.floor(r/time_day),n=Math.floor(r%time_day/time_hour),i=Math.floor(r%time_hour/time_minute),d=Math.floor(r%time_minute/time_seconds);return a+"vrk "+n+"h "+i+"min "+d+"s"},repeat:r};return a}var cdowns=new Array,persons=new Array,g=new Graph,index=0,time_seconds=1e3,time_minute=60*time_seconds,time_hour=60*time_minute,time_day=24*time_hour,showId=!1,showPic=!1,text={age:"Ikä",birthday:"Syntymäaika",nextBirthday:"Seur. synttäriin",dieDate:"Kuolinaika"},updCount=0,countdownIndex=0;